- 
  action: "add_pipelines"
  pipelines: 
    pl1: 
      f1: 
        type: "log10"
        params:
          field: "drho_over_rho"
          output_name: "log_drho"
          clamp_min_value: 0.01
    x_slice_pl:
      f1: 
        type: "slice"
        params: 
          point: 
            x: 0.0
            y: 0.0
            z: 0.0
          normal: 
            x: 1.0
            y: 0.0
            z: 0.0
- 
  action: "add_scenes"
  scenes:
    # log_density:
    #   plots:
    #     p1:
    #       type: "pseudocolor"
    #       field: "log_drho"
    #       pipeline: "pl1"
    #       min_value: -2.0
    #       max_value: 1.5
    #   renders:
    #     r1:
    #       image_prefix: "log_drho%05d"
    #       annotations: "true"
    #       camera:
    #         look_at: [0.0, 0.0, 0.0]
    #         position: [0.0, -250.0, 0.0]
    #         up: [0.0, 0.0, 1.0]
    density: 
      plots:
        p1: 
          type: "pseudocolor"
          field: "drho_over_rho"
          min_value: -0.025
          max_value: 0.025
      renders:
        r1:
          image_prefix: "drho%05d"
          annotations: "true"
          camera:
            look_at: [0.0, 0.0, 0.0]
            position: [0.0, -250.0, 0.0]
            up: [0.0, 0.0, 1.0]
    entropy:
      plots: 
        p1: 
          type: "pseudocolor"
          field: "dK_over_K"
          min_value: -0.05
          max_value: 0.05
      renders:
        r1:
          image_prefix: "dK%05d"
          annotations: "true"
          camera:
            look_at: [0.0, 0.0, 0.0]
            position: [0.0, -250.0, 0.0]
            up: [0.0, 0.0, 1.0]
    temperature: 
      plots:
        p1: 
          type: "pseudocolor"
          field: "dT_over_T"
      renders:
        r1:
          image_prefix: "dT%05d"
          annotations: "true"
          camera:
            look_at: [0.0, 0.0, 0.0]
            position: [0.0, -250.0, 0.0]
            up: [0.0, 0.0, 1.0]
    delta_heating_rate:
      plots: 
        p1: 
          type: "pseudocolor"
          field: "dEdot_over_Edot"
          #min_value: -0.1
          #max_value: 0.1
      renders:
        r1:
          image_prefix: "deltaEdot%05d"
          annotations: "true"
          camera:
            look_at: [0.0, 0.0, 0.0]
            position: [0.0, -250.0, 0.0]
            up: [0.0, 0.0, 1.0]
    heating_rate:
      plots: 
        p1: 
          type: "pseudocolor"
          field: "mean_Edot"
      renders:
        r1:
          image_prefix: "Edot%05d"
          annotations: "true"
          camera:
            look_at: [0.0, 0.0, 0.0]
            position: [0.0, -250.0, 0.0]
            up: [0.0, 0.0, 1.0]
-
  action: "add_queries"
  queries:
    sum_entropy:
      params:
        expression: "sum(field('entropy'))"
        name: "total_entropy"
    bin_density:
      params:
        expression: "binning('drho_over_rho','avg', [axis('x',[-50,50]), axis('y', [-50,50]), axis('z', num_bins=64)])"
        name: drho_profile
    bin_pressure:
      params:
        expression: "binning('dP_over_P','avg', [axis('x',[-50,50]), axis('y', [-50,50]), axis('z', num_bins=64)])"
        name: dP_profile
    bin_entropy:
      params:
        expression: "binning('dK_over_K','avg', [axis('x',[-50,50]), axis('y', [-50,50]), axis('z', num_bins=64)])"
        name: dK_profile
    bin_rms_density:
      params:
        expression: "binning('drho_over_rho','std', [axis('x',[-50,50]), axis('y', [-50,50]), axis('z', num_bins=64)])"
        name: drho_rms_profile
    bin_rms_pressure:
      params:
        expression: "binning('dP_over_P','std', [axis('x',[-50,50]), axis('y', [-50,50]), axis('z', num_bins=64)])"
        name: dP_rms_profile
    bin_rms_entropy:
      params:
        expression: "binning('dK_over_K','std', [axis('x',[-50,50]), axis('y', [-50,50]), axis('z', num_bins=64)])"
        name: dK_rms_profile
-
  action: "save_session"
-
  action: "add_extracts"
  extracts: 
    x_slice_extract: 
      type: "relay"
      pipeline: "x_slice_pl"
      params: 
        path: "slice_x"
        protocol: "blueprint/mesh/hdf5"
        fields:
         - "entropy"
         - "temperature"
         - "drho_over_rho"
         - "dK_over_K"
         - "mean_Edot"
         - "dEdot_over_Edot"
